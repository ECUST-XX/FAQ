## REDIS中List是如何实现的？

### 持续二连一下REDIS，虽然枯燥，但是难懂啊...

#### 列表对象

* 编码方式:压缩链表和链表

* 当列表每个元素长度小于64字节切个数小于512时使用压缩链表其余都用链表编码(以上限制可修改)

#### 链表

* 分为listNode与list两部分

* listNode由前置节点指针,后置节点指针,节点值组成,是双向链表

* list则由链表头节点指针,链表尾节点指针,链表节点数,节点复制函数,节点释放函数,节点值对比函数组成

* 链表被用于列表键,发布订阅,慢查询,监视器等

* 头节点的头节点指针与尾节点的尾节点指针都指向null,是无环链表

* 通过list的三个函数指针可以使链表存储不同类型的值

#### 压缩链表

* 是一块连续的内存,主要由节点构成,非节点部分则记录了压缩列表信息,是节约内存的顺序型数据结构

* 非节点部分由总容量,起始点与尾节点字节数,节点数量,列表节点,0xFF(压缩列表结尾标志)组成

* 节点部分由前节点长度(1或5字节),节点编码(保存了数据类型与长度),节点内容组成

* 节点的更新可能会导致连锁更新,但出现几率不高


